using System.Diagnostics;

//////////////////////////////////////////////////////////////////////
// ARGUMENTS
//////////////////////////////////////////////////////////////////////

var target = Argument("target", "Default");
var configuration = Argument("configuration", "Release");

//////////////////////////////////////////////////////////////////////
// TASKS
//////////////////////////////////////////////////////////////////////

Task("Launch-WebApp")
    .Does(async (ctx) =>
{
    var process = new Process();
    process.StartInfo.FileName = "dotnet";
    process.StartInfo.Arguments = @"run --project .\src\RazorPagesProject\ --no-build";
    process.Start();

    // Web app が起動するまで待機
    await System.Threading.Tasks.Task.Delay(5000);
});

//////////////////////////////////////////////////////////////////////
// TASK TARGETS
//////////////////////////////////////////////////////////////////////

Task("Default")
    .IsDependentOn("Launch-WebApp");

//////////////////////////////////////////////////////////////////////
// EXECUTION
//////////////////////////////////////////////////////////////////////

RunTarget(target);
